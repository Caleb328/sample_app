<div id="dialog">
	    <div class="row-fluid">
	      	<div class="span6">
	      		<div class="row-fluid">
	      			<div class="span12">
	      				<div id="calendar"></div>
	      			</div>
	      		</div>
	      		<div class="row-fluid">
	      			<input type="text" placeholder="Event date..." id="datepicker_text" as="datetime_picker" class="span5"/>
	      			<div class="span6">
				  		<input type="button" id="clear_date" value="Clear" />
	      			</div>
	      		</div>

			      <script type="text/javascript">
			        $(function() {
			        	$( "#calendar" ).datepicker({
			        	  altField: "#datepicker_text",
			              dateFormat: "yy-mm-dd",
			              defaultDate: ""
			        	});

			        	$( '#datepicker_text').val("");
					    $( "#clear_date" ).click(function() {
			        		$( '#datepicker_text').val("");
					    });
			        });
			      </script>
	      	</div>
	      	<div class="span6 centered">
	      		<br>
	      		<br>
	      		<div class="row"><a class="btn btn-primary btn-large span10 offset1 btn_time_period" id="morning" href="#">Morning</a></div>
	      		<br>
	      		<div class="row"><a class="btn btn-primary btn-large span10 offset1 btn_time_period" id="afternoon" href="#">Afternoon</a></div>
	      		<br>
	      		<div class="row"><a class="btn btn-primary btn-large span10 offset1 btn_time_period" id="night" href="#">Night</a></div>
	      		<br>
	      		<input type="hidden" id="time_period_text" value="" />
	      	</div>
	    </div>
	    <div class="row-fluid">
	      	<div class="span2 offset8">
	      		<input type="submit" id="dialog_btn_submit" class="btn btn-primary"  value="Confirm" />
	      	</div>
	      	<div class="span2">
	      		<input type="button" id="dialog_btn_cancel" class="btn" value="Cancel"/>
	      	</div>
	    </div>
</div>

	    <script type="text/javascript">
	        $(function() {
			    $( "#dialog" ).dialog({
			      autoOpen: false,
			      show: {
			        effect: "fade",
			        duration: 300
			      },
			      hide: {
			        effect: "fade",
			        duration: 300
			      }
			    });
			    $( "#dialog" ).dialog({
			    	height: 450,
				    width: 850,
				    modal: true,
				    resizable: false,
				    dialogClass: 'no-close when-dialog noTitleStuff'
			    });
   
			    $( "#when_field" ).click(function() {
			      $( "#dialog" ).dialog( "open" );
			      return false;
			    });

			    $( "#dialog_btn_cancel" ).click(function() {
			    	$( "#dialog" ).dialog( "close" );
			    });

			    $( "#dialog_btn_submit" ).click(function() {
			    	result = $( "#datepicker_text" ).val();
			    	time_period = $( "#time_period_text" ).val();
			    	if (result == "") {
			    		result = $( "#time_period_text" ).val();
			    	}
			    	else if (time_period != "") {
			    		result = result + "|" + time_period;
			    	}
			    	$( "#when" ).val(result);
			    	$( "#dialog" ).dialog( "close" );
			    });

			    $( ".btn_time_period" ).click(function() {
				    if ($( "#time_period_text" ).val() == $(this).html()) {
				    	$( "#time_period_text" ).val("");
				    }
				    else {
				    	$( "#time_period_text" ).val($(this).html());
				    }

				     idClick = $(this).attr("id");
				     varthis = $(this);

				     if ($(this).hasClass("down")){
				         $(this).removeClass("down");
				     }
				     else{
				         $("a.btn_time_period").removeClass("down");
				         $(this).addClass("down");
				     }
			    	return false;
			    });

			});
		</script>